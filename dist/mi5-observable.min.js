!function n(s,a,i){function l(t,e){if(!a[t]){if(!s[t]){var r="function"==typeof require&&require;if(!e&&r)return r(t,!0);if(o)return o(t,!0);throw(r=new Error("Cannot find module '"+t+"'")).code="MODULE_NOT_FOUND",r}r=a[t]={exports:{}},s[t][0].call(r.exports,function(e){return l(s[t][1][e]||e)},r,r.exports,n,s,a,i)}return a[t].exports}for(var o="function"==typeof require&&require,e=0;e<i.length;e++)l(i[e]);return l}({1:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});const n=e("../../src/Observable/ObservableAssign"),s=e("../../src/Observable/ObservableProperty"),a=e("../../src/Observable/ObservableProxy"),i=e("../../src/Observable/ObservableState"),l=e("../../src/System/EventHandler/ArrayChangedEventArgs"),o=e("../../src/System/EventHandler/EventHandler"),c=e("../../src/System/EventHandler/PropertyChangedEventArgs");e={EventHandler:o.EventHandler,observableAssign:n.observableAssign,ObservableProperty:s.ObservableProperty,ObservableProxy:a.ObservableProxy,ObservableState:i.ObservableState,ArrayChangedEventArgs:l.ArrayChangedEventArgs,PropertyChangedEventArgs:c.PropertyChangedEventArgs},window.mi5=window.mi5||{},window.mi5.observable=Object.assign(window.mi5.observable||{},e)},{"../../src/Observable/ObservableAssign":8,"../../src/Observable/ObservableProperty":10,"../../src/Observable/ObservableProxy":11,"../../src/Observable/ObservableState":12,"../../src/System/EventHandler/ArrayChangedEventArgs":16,"../../src/System/EventHandler/EventHandler":18,"../../src/System/EventHandler/PropertyChangedEventArgs":19}],2:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.escapeHtml=function(e){if(!e)return e;const t={"<":"&lt;",">":"&gt;","&":"&amp;","/":"&#x2F;","=":"&#x3D;",'"':"&quot;","'":"&#39;","`":"&#x60;"};return e.replace(/[&<>"'`=\/]/g,e=>t[e])}},{}],3:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});const n=e("../System/EventHandler/EventHandler");r.observableCheck=function(e){return e&&"object"==typeof e&&"changeHandler"in e&&e.changeHandler instanceof n.EventHandler}},{"../System/EventHandler/EventHandler":18}],4:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});const i=e("../../System/EventHandler/ArrayChangedEventArgs"),n=e("../../System/Utility/ObjectFullAssign");class s extends e("../ObservableBase").ObservableBase{constructor(e){super({name:"ArrayProxy",disableAsync:e})}}class a extends Array{constructor(...e){super(...e)}static getMergedObservable(e,t){e=new a(...e),t=n.objectFullAssign(e,new s(t));return Object.defineProperty(t,"changeHandler",{enumerable:!1}),t}static get[Symbol.species](){return Array}publishCollectionChanged(e,t,r,n,s,a){this.changeHandler.invoke(new i.ArrayChangedEventArgs({type:e,propertyName:t,args:r,oldValue:n,newValue:s,sender:a}))}toJSON(){return this.slice()}}r.ArrayObservable=a},{"../../System/EventHandler/ArrayChangedEventArgs":16,"../../System/Utility/ObjectFullAssign":25,"../ObservableBase":9}],5:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});const i=e("../../System/Utility/IsInteger");class n{get(s,a,i){if(a in s){const l=Reflect.get(s,a,i);return-1===n.methodsToWatch.indexOf(a.toString())?l:(...e)=>{var t=s.slice(),r=l.apply(s,e),n=s.slice();return s.publishCollectionChanged("call",a,e,t,n,i),r}}}set(e,t,r,n){if(!t||"length"!==t.toString()&&"number"!=typeof t&&!i.isPositiveIntegerString(t))return Reflect.set(e,t,r,n),!0;var s=e.slice();Reflect.set(e,t,r,n);var a=e.slice();return e.publishCollectionChanged("set",t,[r],s,a,n),!0}deleteProperty(e,t){var r=e.slice();Reflect.deleteProperty(e,t);var n=e.slice();return e.publishCollectionChanged("delete",t,[],r,n,null),!0}}n.methodsToWatch=["copyWithin","fill","pop","push","reverse","shift","sort","splice","unshift"],r.ArrayProxyHandler=n},{"../../System/Utility/IsInteger":23}],6:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});const a=e("../../System/EventHandler/PropertyChangedEventArgs");var n=e("../ObservableBase");const s=e("../../System/Utility/ObjectFullAssign");class i extends n.ObservableBase{static getMergedObservable(e,t){t=s.objectFullAssign(e,new i(t),!0);return Object.defineProperty(t,"changeHandler",{enumerable:!1}),t}constructor(e){super({name:"ObjectProxy",disableAsync:e})}publishPropertyChanged(e,t,r,n,s){this.changeHandler.invoke(new a.PropertyChangedEventArgs({type:e,propertyName:t,oldValue:r,newValue:n,sender:s}))}toJSON(){return super.toJSON()}}r.ObjectObservable=i},{"../../System/EventHandler/PropertyChangedEventArgs":19,"../../System/Utility/ObjectFullAssign":25,"../ObservableBase":9}],7:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.ObjectProxyHandler=class{constructor(e,t,r,n){this._methodsToWatch=e,this._watchSet=t,this._watchDelete=r,this._triggerOnlyOnChange=n}get(r,n,s){if(n in r){const a=Reflect.get(r,n,s);return-1===this._methodsToWatch.indexOf(n.toString())||"function"!=typeof a?a:(...e)=>{var t=a.apply(r,e);return r.publishPropertyChanged("call",n,void 0,e,s),t}}}set(e,t,r,n){if(this._watchSet){var s=Reflect.get(e,t,n);return(Reflect.set(e,t,r,n),this._triggerOnlyOnChange&&s===r)?!0:(e.publishPropertyChanged("set",t,s,r,n),!0)}return Reflect.set(e,t,r,n),!0}deleteProperty(e,t){if(this._watchDelete){var r=Reflect.get(e,t);return Reflect.deleteProperty(e,t),e.publishPropertyChanged("delete",t,r,void 0,null),!0}return Reflect.deleteProperty(e,t),!0}}},{}],8:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});const i=e("./ObservableProperty");r.observableAssign=function(t,...e){t=t||{};for(const n of e)for(const s of Object.getOwnPropertyNames(n)){var r=n[s];const a=t[s];let e;e=i.observablePropertyCheck(r)?r.value:r,i.observablePropertyCheck(a)?a.value=e:t[s]=e}}},{"./ObservableProperty":10}],9:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});const a=e("../System/EventHandler/EventHandler");r.ObservableBase=class{constructor({name:e,forwardTo:t,bubbleFrom:r,disableAsync:n}={}){if(this.changeHandler=new a.EventHandler,n&&(this.changeHandler=new a.EventHandler(!0)),t&&this.sendChangeEventsTo(t),r)for(const s of r)this.receiveChangeEventsFrom(s);this.tagDelegate(e)}subscribe(e,t){return this.changeHandler.subscribe(e,t)}sendChangeEventsTo(e){this.subscribe(e.changeHandler.delegate)}receiveChangeEventsFrom(e){e.subscribe(this.changeHandler.delegate)}unsubscribeCallback(e){return this.changeHandler.unsubscribeCallback(e)}unsubscribeSender(e){return this.changeHandler.unsubscribeListener(e)}unsubscribeDelegate(e){return this.changeHandler.unsubscribeDelegate(e)}tagDelegate(e){e&&(this.changeHandler.delegate._tag=e)}dispose(){this.changeHandler.dispose()}toJSON(){const e={};for(const t in this)"changeHandler"!==t&&"privateProperty2"!==t&&(e[t]=this[t]);return e}}},{"../System/EventHandler/EventHandler":18}],10:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});const n=e("../Html/EscapeHtml"),a=e("../System/EventHandler/PropertyChangedEventArgs"),s=e("../System/Types/NoneType"),i=e("../System/Utility/IsPrimitive"),l=e("./IObservable");class o extends e("./ObservableBase").ObservableBase{constructor(e,t={}){super(t),this.propertyName="",this._triggerOnlyOnChange=!1,t=t||{},this._value=e,this.propertyName=t.name||"",this._triggerOnlyOnChange=t.onlyWhenChanged||!1}get value(){return this._value}set value(e){var t=this._value;this._value=e,this._triggerOnlyOnChange&&t===e||this.publishPropertyChanged("set",this.propertyName,t,e,this)}get safeValue(){return s.isNone(this._value)||!i.isPrimitive(this._value)?"":n.escapeHtml(String(this._value))}toString(){return JSON.stringify(this._value)}toJSON(){return this._value}publishPropertyChanged(e,t,r,n,s){this.changeHandler.invoke(new a.PropertyChangedEventArgs({type:e,propertyName:t,oldValue:r,newValue:n,sender:s}))}}r.ObservableProperty=o,r.observablePropertyCheck=function(e){return!!l.observableCheck(e)&&(e&&e instanceof o)}},{"../Html/EscapeHtml":2,"../System/EventHandler/PropertyChangedEventArgs":19,"../System/Types/NoneType":20,"../System/Utility/IsPrimitive":24,"./IObservable":3,"./ObservableBase":9}],11:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});const n=e("./Internal/ArrayObservable"),s=e("./Internal/ArrayProxyHandler"),i=e("./Internal/ObjectObservable"),l=e("./Internal/ObjectProxyHandler");class o{static proximate(e,t,r){if("function"==typeof e)throw new Error("Unsupported type: function");return Array.isArray(e)?this.proximateArray(e,t,r):"object"==typeof e?this.proximateObject(e,t,r):this.proximateObject({value:e},t,r)}static proximateObject(e,t,r,n=[],s=!0,a=!0){if("function"==typeof e)throw new Error("Unsupported type: function");t=i.ObjectObservable.getMergedObservable(e,t),r=new l.ObjectProxyHandler(n||[],s||!1,a||!1,r||!1),r=new Proxy(t,r);return o._models.set(r,t),r}static proximateArray(e,t,r){e=n.ArrayObservable.getMergedObservable(e,t),t=new s.ArrayProxyHandler,t=new Proxy(e,t);return o._models.set(t,e),t}}o._models=new WeakMap,r.ObservableProxy=o},{"./Internal/ArrayObservable":4,"./Internal/ArrayProxyHandler":5,"./Internal/ObjectObservable":6,"./Internal/ObjectProxyHandler":7}],12:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});const n=e("../Html/EscapeHtml"),a=e("../System/EventHandler/PropertyChangedEventArgs"),s=e("../System/Types/NoneType"),i=e("../System/Utility/CloneDeep"),l=e("../System/Utility/IsPrimitive"),o=e("./IObservable");class c extends e("./ObservableBase").ObservableBase{constructor(e,t={}){super(t),this.propertyName="",e instanceof c?this._value=i.cloneDeep(e.value):this._value=i.cloneDeep(e),this.propertyName=(t=t||{}).name||"setState"}get value(){return i.cloneDeep(this._value)}set value(e){this.setState(e,!0)}getSafeValue(e){if(!e)return!s.isNone(this._value)&&l.isPrimitive(this._value)?n.escapeHtml(String(this._value)):"";e=this.value[e];return s.isNone(e)||!l.isPrimitive(e)?"":n.escapeHtml(String(e))}getValue(e){return e?this.value[e]:!s.isNone(this._value)&&l.isPrimitive(this._value)?i.cloneDeep(this._value):void 0}getState(){return this.value}setState(e,t=!1){var r=i.cloneDeep(this._value);let n,s;if(l.isPrimitive(this._value)){if("function"==typeof e)throw new Error("Cannot call setState with a function if state is primitive.");t=!0}if(t)n=function(e){return this._value=i.cloneDeep(e),e}.call(this,e);else if("function"==typeof e)[n,s]=function(e){var t=i.cloneDeep(this._value),e=e.call(t,t);return this._value=i.cloneDeep(t),[t,e]}.call(this,e);else{if(!e||"object"!=typeof e)throw new Error("value is not a partial state or a function");n=function(e){const t=i.cloneDeep(this._value);for(const r of Object.getOwnPropertyNames(e))t[r]=e[r];return this._value=i.cloneDeep(t),t}.call(this,e)}return this.publishPropertyChanged("call",this.propertyName,r,n,this),{oldValue:r,newValue:n,returnValue:s}}toString(){return JSON.stringify(this._value)}toJSON(){return this.value}publishPropertyChanged(e,t,r,n,s){this.changeHandler.invoke(new a.PropertyChangedEventArgs({type:e,propertyName:t,oldValue:r,newValue:n,sender:s}))}}r.ObservableState=c,r.observableStateCheck=function(e){return!!o.observableCheck(e)&&(e&&e instanceof c)}},{"../Html/EscapeHtml":2,"../System/EventHandler/PropertyChangedEventArgs":19,"../System/Types/NoneType":20,"../System/Utility/CloneDeep":21,"../System/Utility/IsPrimitive":24,"./IObservable":3,"./ObservableBase":9}],13:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.DeferredPromise=class{constructor(e,t=!1){this.throwOnUnhandledError=t,this.resolve=function(){},this.reject=function(){},this._promise=new Promise((e,t)=>{this.resolve=e,this.reject=t}),e?this.then(e,t):this.then(e=>e,t)}get output(){return this._promise}then(e,t=this.throwOnUnhandledError){return e&&(this._promise=this._promise.then(e)),t&&(this._promise=this._promise.catch(e=>{throw e})),this}catch(e,t=this.throwOnUnhandledError){return e&&(this._promise=this._promise.catch(e)),t&&(this._promise=this._promise.catch(e=>{throw e})),this}}},{}],14:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});const n=e("./DeferredPromise");r.RepeatablePromise=class{constructor(e,t,r=!1){this.onUnhandledError=t,this.throwOnUnhandledError=r,this.callbacks=[],e?this.then(e):this.then(e=>e)}resolve(e){const t=this.build();return t.resolve(e),t.output}reject(e){const t=this.build();return t.reject(e),t.output}then(e){return this.callbacks.push({onfulfilled:e}),this}catch(e){return this.callbacks.push({onrejected:e}),this}build(){let e;for(const t of this.callbacks)if(e)t.onfulfilled?e.then(t.onfulfilled):t.onrejected&&e.catch(t.onrejected);else{if(!t.onfulfilled)throw new Error("Bug in RepeatablePromise constructor. First onfulfilled is null.");e=new n.DeferredPromise(t.onfulfilled,!1)}if(!e)throw new Error("Bug in RepeatablePromise constructor. No callbacks, not even the default first onfulfilled.");return this.onUnhandledError&&e.catch(this.onUnhandledError),this.throwOnUnhandledError&&e.catch(e=>{throw e}),e}}},{"./DeferredPromise":13}],15:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.zip=function(r,n){return r.length>=n.length?r.map((e,t)=>[e,n[t]]):n.map((e,t)=>[r[t],n])},r.cartesian=function(e,t){const r=[];for(const n of e)r.push(...t.map(e=>[n,e]));return r},r.range=function(e){return Array.from({length:e},(e,t)=>t)};r.traverse=function*e(t){if(Array.isArray(t))for(const r of t)yield*e(r);else yield t}},{}],16:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.ArrayChangedEventArgs=class{constructor(e){this.type="",this.propertyName="",this.args=[],Object.assign(this,e)}}},{}],17:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});const n=e("../Async/RepeatablePromise");r.Delegate=class{constructor(e,t){if(t||console.warn("Delegate created without thisArg. Did you mean to?"),(this.thisArg=t)&&"object"==typeof t&&"constructor"in t&&(this.callbackOwnerName=t.constructor.name),!e)throw new Error("callback is required");if("function"!=typeof e)throw new Error("callback must be a callback function");this.callback=e,this.callbackName=e.name,this.callbackOwnerName&&this.callbackName?this.name=`${this.callbackOwnerName}.${this.callbackName}()`:this.callbackName?this.name=this.callbackName+"()":this.callbackOwnerName&&(this.name=this.callbackOwnerName+".__lambda__()"),this.promise=new n.RepeatablePromise(e.bind(t))}}},{"../Async/RepeatablePromise":14}],18:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});const a=e("../Collections/ArrayUtilities"),n=e("./Delegate");r.EventHandler=class{constructor(e=!1){this._disableAsync=e,this.delegate=[]}subscribe(e,t){if(Array.isArray(e))(function(t){this.delegate.find(e=>e===t)||this.delegate.push(t)}).call(this,e);else if(!this.find({callback:e,thisArg:t,firstMatch:!0}).length){t=new n.Delegate(e,t);return this.delegate.push(t),this._disableAsync?void 0:t.promise}}unsubscribeCallback(t){var e=this.delegate.findIndex(e=>!Array.isArray(e)&&e.callback===t);0<=e&&this.delegate.splice(e,1)}unsubscribeListener(t){"delegate"in t&&this.unsubscribeDelegate(t.delegate);let e=0;for(;0<=e;)e=this.delegate.findIndex(e=>!Array.isArray(e)&&e.thisArg===t),0<=e&&this.delegate.splice(e,1)}unsubscribeDelegate(t){let e=0;for(;0<=e;)e=this.delegate.findIndex(e=>e===t),0<=e&&this.delegate.splice(e,1)}invoke(e){for(const t of a.traverse(this.delegate))this._disableAsync?t.callback.call(t.thisArg,e):t.promise.resolve(e)}find({callback:t,thisArg:r,firstMatch:e}={}){const n=[];for(const s of a.traverse(this.delegate))if(function(e){if(t&&r)return e.callback===t&&e.thisArg===r;if(t)return e.callback===t;if(r)return e.thisArg===r;return!0}(s)&&(n.push(s),e))break;return n}clear(){this.delegate.length=0}dispose(){this.clear(),this.delegate=void 0}}},{"../Collections/ArrayUtilities":15,"./Delegate":17}],19:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.PropertyChangedEventArgs=class{constructor(e){this.type="",Object.assign(this,e)}}},{}],20:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.isNone=function(e){return null==e||void 0===e}},{}],21:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.cloneDeep=function r(e,n=new WeakMap){if(Object(e)!==e)return e;if(n.has(e))return n.get(e);let s;e instanceof Set?(s=new Set,Array.from(e,e=>s.add(r(e,n)))):e instanceof Map?(s=new Map,Array.from(e,([e,t])=>s.add(r(e,n),r(t,n)))):s=Array.isArray(e)?Array.from(e):e instanceof Date?new Date(e):e instanceof RegExp?new RegExp(e.source,e.flags):"function"==typeof e?new Function("return "+e.toString())():Object.getPrototypeOf(e)?Object.create(Object.getPrototypeOf(e)):Object.create(null),n.set(e,s);for(const a of Object.getOwnPropertyNames(e)){var t=Object.getOwnPropertyDescriptor(e,a);t&&!1===t.writable||("function"!=typeof e[a]||a in s?t&&(t.get||t.set)?Object.defineProperty(s,a,t):s[a]=r(e[a],n):t&&(Object.defineProperty(s,a,t),n.set(e[a],s[a])))}return s}},{}],22:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.cloneObject=function(e){if(e&&"object"==typeof e){var t=Object.create(Object.getPrototypeOf(e));for(const n of Object.getOwnPropertyNames(e)){var r=Object.getOwnPropertyDescriptor(e,n);r&&Object.defineProperty(t,n,r)}return t}}},{}],23:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.isPositiveIntegerString=function(e){return!(!e||"string"!=typeof e)&&("0"===e||/^[1-9]\d*$/.test(e))}},{}],24:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.isPrimitive=function(e){return Object(e)!==e}},{}],25:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});const a=e("./CloneObject"),i=e("../Types/NoneType");r.objectFullAssign=function(e,t,r=!1){if(i.isNone(e)&&(e={}),!t||"object"!=typeof t||"object"!=typeof e)return e;r&&(e=a.cloneObject(e));for(const s of Array.from(new Set(function e(t){const r=[];r.push(...Object.getOwnPropertyNames(t).filter(e=>"constructor"!==e));var t=Object.getPrototypeOf(t);t&&"Object"!==t.constructor.name&&r.push(...e(t));return r}(t)))){var n=function e(t,r){var n=Object.getOwnPropertyDescriptor(t,r);if(n)return n;var t=Object.getPrototypeOf(t);if(t&&"Object"!==t.constructor.name)return e(t,r)}(t,s);n&&Object.defineProperty(e,s,n)}return e}},{"../Types/NoneType":20,"./CloneObject":22}]},{},[1]);