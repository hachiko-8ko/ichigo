!function i(o,n,s){function c(r,e){if(!n[r]){if(!o[r]){var t="function"==typeof require&&require;if(!e&&t)return t(r,!0);if(h)return h(r,!0);throw(t=new Error("Cannot find module '"+r+"'")).code="MODULE_NOT_FOUND",t}t=n[r]={exports:{}},o[r][0].call(t.exports,function(e){return c(o[r][1][e]||e)},t,t.exports,i,o,n,s)}return n[r].exports}for(var h="function"==typeof require&&require,e=0;e<s.length;e++)c(s[e]);return c}({1:[function(e,r,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=e("../../src/System/Async/RepeatablePromise"),o=e("../../src/System/Async/DeferredPromise");e={DeferredPromise:o.DeferredPromise,RepeatablePromise:i.RepeatablePromise},window.mi5=window.mi5||{},window.mi5.promise=Object.assign(window.mi5.promise||{},e),window.mi5.using=function(e,r){if(!e||!r)throw new Error("NullArgument");window.eval.call(window,"(function (arg) { window."+r+" = arg; })")(e)}},{"../../src/System/Async/DeferredPromise":2,"../../src/System/Async/RepeatablePromise":3}],2:[function(e,r,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.DeferredPromise=class{constructor(e,r=!1){this.throwOnUnhandledError=r,this.resolve=function(){},this.reject=function(){},this._promise=new Promise((e,r)=>{this.resolve=e,this.reject=r}),e?this.then(e,r):this.then(e=>e,r)}get output(){return this._promise}then(e,r=this.throwOnUnhandledError){return e&&(this._promise=this._promise.then(e)),r&&(this._promise=this._promise.catch(e=>{throw e})),this}catch(e,r=this.throwOnUnhandledError){return e&&(this._promise=this._promise.catch(e)),r&&(this._promise=this._promise.catch(e=>{throw e})),this}}},{}],3:[function(e,r,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=e("./DeferredPromise");t.RepeatablePromise=class{constructor(e,r,t=!1){this.onUnhandledError=r,this.throwOnUnhandledError=t,this.callbacks=[],e?this.then(e):this.then(e=>e)}resolve(e){const r=this.build();return r.resolve(e),r.output}reject(e){const r=this.build();return r.reject(e),r.output}then(e){return this.callbacks.push({onfulfilled:e}),this}catch(e){return this.callbacks.push({onrejected:e}),this}build(){let e;for(const r of this.callbacks)if(e)r.onfulfilled?e.then(r.onfulfilled):r.onrejected&&e.catch(r.onrejected);else{if(!r.onfulfilled)throw new Error("Bug in RepeatablePromise constructor. First onfulfilled is null.");e=new i.DeferredPromise(r.onfulfilled,!1)}if(!e)throw new Error("Bug in RepeatablePromise constructor. No callbacks, not even the default first onfulfilled.");return this.onUnhandledError&&e.catch(this.onUnhandledError),this.throwOnUnhandledError&&e.catch(e=>{throw e}),e}}},{"./DeferredPromise":2}]},{},[1]);