!function n(o,i,s){function a(t,e){if(!i[t]){if(!o[t]){var r="function"==typeof require&&require;if(!e&&r)return r(t,!0);if(u)return u(t,!0);throw(r=new Error("Cannot find module '"+t+"'")).code="MODULE_NOT_FOUND",r}r=i[t]={exports:{}},o[t][0].call(r.exports,function(e){return a(o[t][1][e]||e)},r,r.exports,n,o,i,s)}return i[t].exports}for(var u="function"==typeof require&&require,e=0;e<s.length;e++)a(s[e]);return a}({1:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});const n=e("../../src/Router/PageRouter");e={PageRouter:n.PageRouter},window.mi5=window.mi5||{},window.mi5.router=Object.assign(window.mi5.router||{},e)},{"../../src/Router/PageRouter":6}],2:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});const i=e("../System/Types/KeywordArguments"),s=e("./ElementType"),n=e("./ExtractNodeContent");function a(e,t={},r){return{tagName:e,properties:t={},attributes:r}=i.Kwarg.parseArgs({tagName:e,properties:t,attributes:r}),t&&"attributes"in t&&(r=Object.assign(r||{},t.attributes),delete t.attributes),function(e,t={},r){const n=document.createElement(e);if(r)for(const o of Object.getOwnPropertyNames(r))n.setAttribute(o,r[o]);return Object.assign(n,t),n}(e,t,r)}function o(e="",t={},r){return{htmlOrProperties:e="",propertiesOrAttributes:t={},attributes:r}=i.Kwarg.parseArgs({htmlOrProperties:e,propertiesOrAttributes:t,attributes:r}),l(s.elementType.HTMLDivElement,e,t,r)}function u(e="",t={},r){return{htmlOrProperties:e="",propertiesOrAttributes:t={},attributes:r}=i.Kwarg.parseArgs({htmlOrProperties:e,propertiesOrAttributes:t,attributes:r}),l(s.elementType.HTMLSpanElement,e,t,r)}function l(e,t="",r={},n){return t instanceof HTMLElement?function(e,t,r,n){const o=a(e,r,n);return o.appendChild(t),o}(e,t,r,n):"object"==typeof t?(o=e,s=r,(i=(i=t)||{}).innerHTML=i.innerHTML||"",a(o,i,s)):(e=e,t=String(t||""),n=n,(r=(r=r)||{}).innerHTML=t,a(e,r,n));var o,i,s}r.createElement=a,r.createHtml=function(e,t=!1){let r;return r=(t?u:o)((e||"").trim()),1!==r.childNodes.length?r:r.firstElementChild||(t?r:u(r.innerHTML))},r.createFragment=function(e){return e=o((e||"").trim()),n.extractNodeContent(e)},r.div=o,r.span=u,r.paragraph=function(e="",t={},r){return{htmlOrProperties:e="",propertiesOrAttributes:t={},attributes:r}=i.Kwarg.parseArgs({htmlOrProperties:e,propertiesOrAttributes:t,attributes:r}),l(s.elementType.HTMLParagraphElement,e,t,r)},r.anchor=function(e="",t={},r={},n){({htmlOrProperties:e="",hrefOrProperties:t={},propertiesOrAttributes:r={},attributes:n}=i.Kwarg.parseArgs({htmlOrProperties:e,hrefOrProperties:t,propertiesOrAttributes:r,attributes:n}));const o=l(s.elementType.HTMLAnchorElement,e,r,n);return"string"==typeof t&&(o.href=String(t||"")),o},r.button=function(e="",t={},r){return{htmlOrProperties:e="",propertiesOrAttributes:t={},attributes:r}=i.Kwarg.parseArgs({htmlOrProperties:e,propertiesOrAttributes:t,attributes:r}),l(s.elementType.HTMLButtonElement,e,t,r)}},{"../System/Types/KeywordArguments":9,"./ElementType":4,"./ExtractNodeContent":5}],3:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.deleteNodeContent=function(e){const t=document.createRange();t.selectNodeContents(e),t.deleteContents()}},{}],4:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),(r=r.elementType||(r.elementType={})).HTMLAnchorElement="a",r.HTMLAreaElement="area",r.HTMLAudioElement="audio",r.HTMLBRElement="br",r.HTMLBaseFontElement="basefont",r.HTMLBlockQuoteElement="blockquote",r.HTMLButtonElement="button",r.HTMLCanvasElement="canvas",r.HTMLDataElement="data",r.HTMLDataListElement="datalist",r.HTMLDialogElement="dialog",r.HTMLDivElement="div",r.HTMLDListElement="dl",r.HTMLEmbedElement="embed",r.HTMLFieldSetElement="fieldset",r.HTMLFormElement="form",r.HTMLHeading1Element="h1",r.HTMLHeading2Element="h2",r.HTMLHeading3Element="h3",r.HTMLHeading4Element="h4",r.HTMLHeading5Element="h5",r.HTMLHeading6Element="h6",r.HTMLHRElement="hr",r.HTMLImageElement="image",r.HTMLInputElement="input",r.HTMLLabelElement="label",r.HTMLLegendElement="legend",r.HTMLLIElement="li",r.HTMLLinkElement="link",r.HTMLMapElement="map",r.HTMLMeterElement="meter",r.HTMLModDelElement="del",r.HTMLModInsElement="ins",r.HTMLOListElement="ol",r.HTMLObjectElement="object",r.HTMLOptGroupElement="optgroup",r.HTMLOptionElement="option",r.HTMLOutputElement="output",r.HTMLParagraphElement="p",r.HTMLParamElement="param",r.HTMLPictureElement="picture",r.HTMLPreElement="pre",r.HTMLProgressElement="progress",r.HTMLQuoteElement="q",r.HTMLScriptElement="script",r.HTMLSelectElement="select",r.HTMLSourceElement="source",r.HTMLSpanElement="span",r.HTMLStyleElement="style",r.HTMLTableCaptionElement="caption",r.HTMLTableDataCellElement="td",r.HTMLTableHeaderCellElement="th",r.HTMLTableColElement="col",r.HTMLTableColGroupElement="colgroup",r.HTMLTableElement="table",r.HTMLTableRowElement="tr",r.HTMLTableSectionBodyElement="tbody",r.HTMLTableSectionFooterElement="tfoot",r.HTMLTableSectionHeaderElement="thead",r.HTMLTemplateElement="template",r.HTMLTextAreaElement="textarea",r.HTMLTimeElement="time",r.HTMLTrackElement="track",r.HTMLUListElement="ul",r.HTMLVideoElement="video"},{}],5:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.extractNodeContent=function(e){const t=document.createRange();return t.selectNodeContents(e),t.extractContents()}},{}],6:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});const n=e("../Html/CreateElement"),i=e("../Html/DeleteNodeContent"),o=e("../Html/ElementType"),a=e("../System/Collections/ArrayUtilities"),s=e("../System/Types/Constructable"),u=e("../System/Types/KeywordArguments"),l=e("../System/Types/NoneType");class c{static get allRoutes(){return this._routes}static get matchedRoute(){return this._matchedRoute||{route:"",params:new Map,config:{route:""}}}static get params(){return this.matchedRoute.params}static get historyMaxLength(){return this._historyMaxLength}static set historyMaxLength(e){this._history.length>e&&(this._history.length=e),this._historyMaxLength=e}static get history(){return this._history}static set notFound(e){this._notFound=e}static configure(e=[],t,r,n,o,i=!0){({routes:e,defaultLayout:t,defaultStaticLayout:r,notFound:n,defaultRoute:o,urlRoutingEnabled:i=!0}=u.Kwarg.parseArgs({routes:e,defaultLayout:t,defaultStaticLayout:r,notFound:n,defaultRoute:o,urlRoutingEnabled:i})),this._configured=!0,n&&(this._notFound=n);for(const s of e)t&&(s.layout=s.layout||t),!l.isNone(r)&&l.isNone(s.staticLayout)&&(s.staticLayout=r),this.addRoute(s);i&&this.turnOnUrlRouting(),this.routeContainer=document.querySelector("page-router")||document.body;try{window.customElements.get("page-router")||window.customElements.define("page-router",d,{extends:"div"}),window.customElements.get("layout-body")||window.customElements.define("layout-body",m,{extends:"div"}),window.customElements.get("not-found")||window.customElements.define("not-found",p,{extends:"div"})}catch(e){}o&&this.defaultRoute(o)}static addRoute(e){let t;t=Array.isArray(e.route)?e.route:[e.route];for(const r of t){if(this._routes.find(e=>e.route===r))throw new Error("Route already exists.");const n=Object.assign({},e);n.route=r,this._routes.push(n)}}static defaultRoute(e){window.location.hash?c.route():c.route(e)}static route(e,t=!0){if(!this._configured)throw new Error("PageRouter not configured. Call configure() first.");if(e)t&&(window.location.hash=e),this._lastRoute=e;else if((e=window.location.hash.slice(1))===this._lastRoute)return void(this._lastRoute=void 0);let r,n=!1;for(const i of this._routes)if(n=this._testRoute(i.route,e||""),n){r=i;break}if(!r)return console.log(`Route ${e} not found.`),void this._renderNotFound();t=(this._matchedRoute||{}).config;this._matchedRoute={route:e,params:n||new Map,config:r},0!==this.history.length&&this.history[this.history.length-1]===e||this._history.push(e),this.history.length>this.historyMaxLength&&this._history.shift();let o=[];Array.isArray(r.routeGuards)?o=r.routeGuards:r.routeGuards&&o.push(r.routeGuards);for(const s of o)if(!1===s.checkValid(r))return void console.warn("Route permission denied");this._renderRoute(r,t)}static back(){var e;this.history.length<2||(this._history.pop(),void 0!==(e=this._history.pop())&&this.route(e))}static turnOnUrlRouting(){this._hashChange=e=>{this.route()},window.addEventListener("hashchange",this._hashChange)}static _testRoute(t,e){const r=new Map;if(!t||!e)return!1;(t=t.toLowerCase()).endsWith("/")&&(t=t.slice(0,-1)),e.endsWith("/")&&(e=e.slice(0,-1));var n,o,i=t.split("/"),e=e.split("/");if(i.length!==e.length)return!1;for([n,o]of a.zip(i,e))if(n.startsWith(":")){let e=n.slice(1);if(e.includes("=")){var s=e.split("=")[1];if(e=e.split("=")[0],s!==o)return!1;if(r.has(e))throw new Error(`Route ${t} contains duplicates of the same parameter.`);r.set(e,o)}else{if(r.has(e))throw new Error(`Route ${t} contains duplicates of the same parameter.`);r.set(e,o)}}else if(n!==o.toLowerCase())return!1;return r}static _renderRoute(t,e){let r=this.routeContainer;e=t.layout&&e&&t.staticLayout&&t.layout===e.layout;if(e||i.deleteNodeContent(r),e){if(r=document.querySelector("layout-body"),!r)throw new Error("<layout-body> element not found")}else if(t.layout){let e;if(s.constructorTypeGuard(t.layout)?e=new t.layout:t.payload&&(e=t.layout()),e&&o(e)?r.appendChild(e.content):e&&r.appendChild(e),r=document.querySelector("layout-body"),!r)throw new Error("<layout-body> element not found")}e&&i.deleteNodeContent(r);let n;function o(e){return"content"in e&&e.content instanceof HTMLElement}s.constructorTypeGuard(t.payload)?n=new t.payload:"function"==typeof t.payload?n=t.payload():t.payload&&(n=t.payload.cloneNode(!0)),n&&o(n)?r.appendChild(n.content):n&&r.appendChild(n)}static _renderNotFound(){i.deleteNodeContent(this.routeContainer),this.routeContainer.appendChild(n.createElement(o.elementType.HTMLDivElement,{id:"not-found",innerHTML:this._notFound||"Quoth the Raven, 404"}))}}c.routeContainer=document.body,c._configured=!1,c._routes=[],c._history=[],c._historyMaxLength=50,r.PageRouter=c;class d extends HTMLElement{constructor(){super()}}class m extends HTMLElement{constructor(){super()}}class p extends HTMLElement{constructor(){super()}}},{"../Html/CreateElement":2,"../Html/DeleteNodeContent":3,"../Html/ElementType":4,"../System/Collections/ArrayUtilities":7,"../System/Types/Constructable":8,"../System/Types/KeywordArguments":9,"../System/Types/NoneType":10}],7:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.zip=function(r,n){return r.length>=n.length?r.map((e,t)=>[e,n[t]]):n.map((e,t)=>[r[t],n])},r.cartesian=function(e,t){const r=[];for(const n of e)r.push(...t.map(e=>[n,e]));return r},r.range=function(e){return Array.from({length:e},(e,t)=>t)};r.traverse=function*e(t){if(Array.isArray(t))for(const r of t)yield*e(r);else yield t}},{}],8:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.constructorTypeGuard=function(e){return e&&e.prototype&&e.prototype.constructor.name}},{}],9:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});const d=e("../Utility/IsInteger");class m{constructor(e,t){if(!e)throw new Error("Argument null exception");this.name=e,this.value=t}static parseArgs(e,t=!1){const r={};var n=Object.getOwnPropertyNames(e);for(const u of n)e[u]instanceof m?r[u]=void 0:r[u]=e[u];const o={};r.$$kw$$=o;const i=[];r.$rest$=i;for(const l of Object.getOwnPropertyNames(e).filter(e=>d.isPositiveIntegerString(e)))e[l]instanceof m||i.push(e[l]);const s={};for(const c of n)if(e[c]instanceof m){var a=e[c];if(a.name in r)r[a.name]=a.value;else{if(!t)throw new Error(`Got an unexpected keyword argument '${a.name}'`);o[a.name]=a.value}if(a.name in s)throw new Error(`Got multiple values for keyword argument + '${a.name}'`);s[a.name]=!0}return r}static unpack(e){const t=[];for(const r of Object.getOwnPropertyNames(e))t.push(n(r,e[r]));return t}isMatch(e){return this.name===e}}function n(e,t){if(!e)throw new Error("Argument null exception");if("string"==typeof e)return new m(e,t);if(Array.isArray(e))return new m(e[0],e[1]);t=Object.getOwnPropertyNames(e);if(!t.length)throw new Error("Argument null exception");if(1<t.length)throw new Error("Invalid map object: multiple keys");return new m(t[0],e[t[0]])}r.Kwarg=m,r.kw=n,r.kwargsToObject=function(e){const t={};for(const r of e)t[r.name]=t[r.value];return t}},{"../Utility/IsInteger":11}],10:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.isNone=function(e){return null==e||void 0===e}},{}],11:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.isPositiveIntegerString=function(e){return!(!e||"string"!=typeof e)&&("0"===e||/^[1-9]\d*$/.test(e))}},{}]},{},[1]);