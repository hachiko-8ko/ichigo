# ichigo
## Minimalist HTML5 Web Framework for TypeScript

Ichigo intends to provide some common features for building web pages, such as observables, two-way binding, and single-page application routing, in a small package (under 60K minified). But really I wrote it for fun so it's primary purpose was to keep me entertained.

### About Ichigo

Ichigo attempts to be _minimalist_ and yet _reasonably full-featured_. It _does not_ attempt to support old browsers ... to be specific, the only reason it succeeds in packing a lot of features into such a small package is because the 2015 ECMAScript standard changed Javascript from a nightmare into a language a person can actually use without needing to execute seppuku.exe.

That said, this is still pretty old code. Everything it uses was in browsers several years back, from the Before Times, before the blood-soaked apocalyptic century called 2020. Will it work in IE? Certainly not, so if you want to run something on IE ... package it with some malware, it's probably on their PC already.

Currently some NPM libraries are needed to build it, Typescript being the main one, but none are needed to run. It's completely self-contained.

It's definitely experimental. It's never been in production, and as it's unlikely that I'll ever make a real site outside of work, it may never go into production. It's just something I wrote for a lark.

### Unit tests

I tried to get jest and ts-jest working on this machine so I could run unit tests. I couldn't even get them to install. So to make unit tests, I wrote a simple test page. You can find it in the tests and tests_out directories. It's very simple, very primitive, but it was frankly easier to do than the full system rebuild that would be required to get NPM to function.

The TypeScript version is currently still at 2.7, because read the previous paragraph.

### Installation

_Option 1: Mini-Ichigo_

Scripts are found in the dist directory. Load those of the following scripts on the page that you need to use:

* General utilities: General helpers for HTML, arrays, etc (15.7K).  
`<script src="mi5-util.min.js"></script>`
* Keyword Arguments: Only the two utilities needed to make python-style keyword arguments work (2.4K).  
`<script src="mi5-keyword.min.js"></script>`
* Deferred/Repeatable Promise: Deferred and repeatable promises (2.6K).  
`<script src="mi5-promise.min.js"></script>`
* Observables: The event handler, observable property, and observable proxy (23.3K).  
`<script src="mi5-observable.min.js"></script>`
* Components: The attribute-based two-way bound components (42.1K).  
`<script src="mi5-component.min.js"></script>`
* Router: The SPA page router (12.7K).  
`<script src="mi5-router.min.js"></script>`
* Prototype Extensions: This patches HTML element, fragment, and other prototypes to add extension methods (45.3K).  
`<script src="mi5-extension.min.js"></script>`

_Option 2: Full Minimized Ichigo Set_

Import the full ichigo script from the dist directory (61.4K).  
`<script src="ichigo-full.min.js"></script>`

_Option 3: TypeScript Modules_

Copy the src directory into a directory in your TypeScript project. Import modules from Api.ts. Import ExtensionLoader.ts if you'd like to patch prototypes with extension methods.

_Option 4: JavaScript Modules_

Build the project using whatever module version you'd like (see tsconfig.json) and import from Api.js. Import ExtensionLoader.js if you'd like to patch prototypes with extension methods.

### Type definitions

Typescript types for mini-ichigo are manually updated, since they can't be auto-generated, and can be found in the dist folder. I might forget to do this when I add something; this is the consequence when you go manual. tsc.exe generates a file saying only "export {}" so i can't depend on the tooling.

Autogenerated types for everything else can be found at https://github.com/hachiko-8ko/ichigo-types. I'll add the manual types in the dist_types folder.

### Examples of use

See the demo page at https://hachiko-8ko.github.io/ichigo-demo for examples and quickstart. The tests in the tests directory also includes general descriptions and several decent, if not at all pretty, examples.

### Future plans

I'm planning on making some breaking changes, hopefully not too much. These are the issues I'm working out in my head:

* Adding sub-components so that sub-elements' HTML properties (e.g. class, style) can be manipulated without making a new component. This one is pretty simple and shouldn't break anything.

* Reorganizing the API to make it difficult to nest components. I can't actually make it impossible, but I can discourage it in code, not just in notes that say "please don't do this," which is what I have right now.

* Eliminating the optional property in i-v tags that allows replacements from one of many nested parents.

* Finding a way to handle the one place where nesting is still critical, loops, without the loop html being captured by the parent component. I don't want to force all loops to be defined in separate 'files' like components. But this means handling loops different to the way everything else is handled, which I don't like.

* Removing the loop parent 'selector', which I never liked, and replacing i5_source with something more flexible.

* A completely opinionated rewrite. This means: deciding which coding style to promote, and possibly remove functionality to match it. As Test 11 shows, everyone's different coding style is currently supported. It's too complicated. I think it will be cutting out almost all of the component constructor overloads, removing all the cases that inject code into existing HTML objects: leaving only innerHtml, outerHtml, and copy from &gt;template&lt; tag. This makes it impossible to have overlapping components, and while we still can't separate HTML into different files unless it's in the JS object, they're at least separate in the main HTML file.
